.. _install-docker:

=================================================
Install with a Containerized Cluster Using Docker
=================================================

.. default-domain:: mongodb

.. facet::
   :name: genre
   :values: tutorial

.. contents:: On this page
   :local:
   :backlinks: none
   :depth: 1
   :class: singlecol

You can install Relational Migrator with Kafka in a containerized environment 
using `Docker <https://docs.docker.com/engine/>`__. This method configures Kafka 
to store data locally in Docker containers. Use this method if you want to learn 
how to configure your own multi-server Kafka environment. 

.. warning::

   This deployment method is not recommended for production workloads. 

About this Task
---------------

`Docker volumes <https://docs.docker.com/storage/volumes/>`__ can be used for 
persisting data if a container stops running or is restarted. 

Before you Begin
----------------

- You must have Docker installed on your computer. For more information, see  
  `Install Docker Engine <https://docs.docker.com/engine/install/>`__. 

- Download the following example ``docker-compose`` that configures a Kafka 
  cluster and Kafka Connect cluster to run Relational Migator locally: Kafka 
  Docker Compose. 

Steps
-----

.. procedure::
   :style: normal

   .. step:: Install a Kafka cluster

      Use the example ``docker-compose`` to set up a Kafka cluster or provide 
      configuration details to connect an existing Kafka cluster.
   
   .. step:: Install a Kafka Connect cluster

      Use the example ``docker-compose`` to install a Kafka Connect cluster with 
      the ``relational-migrator-connect`` image from the public Amazon ECR: 
      ``public.ecr.aws/v4d7k6c9/relational-migrator:latest``.

   .. step:: Install Relational Migrator

      You have two options for installing Relational Migrator:

      1. From the `download center <https://www.mongodb.com/try/download/relational-migrator>`__, 
         select the appropriate Relational Migrator installer.

      #. Create a docker image using a Relational Migrator installer.

         Use the example ``docker-compose`` to install Relational Migrator. 

   .. step:: If your source database is MySQL or Oracle, add their related drivers

      Relational Migrator uses the JDBC driver of the respective source database to read 
      database schema. It bundles SQL Server and PostgreSQL JDBC drivers. For MySQL and 
      Oracle, you must add their drivers to the following path:

      ``<path-to-installation>/mongodb-relational-migrator/lib/app/lib``
      
      - Oracle: `21.6.0.0 of odjbc11.jar from the Oracle 21c
        <https://www.oracle.com/database/technologies/appdev/jdbc-drivers-archive.html>`__
      - MySQL: `latest 8.0.x version, Platform Independent Version 
        <https://dev.mysql.com/downloads/connector/j/>`__

Learn More
----------

- :ref:`kafka-intro`
- :ref:`install-confluent-kafka` 
- :ref:`install-kafka-cluster`
- `Docker Engine Overview <https://docs.docker.com/engine/>`__
